\documentclass[cn,9pt,fancy,hide,normal]{elegantbook}

\title{ISO/IEC 14882:2017(E) }
\subtitle{编程语言：C++}

\author{danix800}
\institute{ISO/IEC}
\date{2017-12}
\version{第五版}

\equote{Victory won\rq t come to us unless we go to it. --- M. Moore}

\logo{logo.png}
\cover{cover.jpg}

% \usepackage{enumitem}
\setlist[enumerate,1]{label={(\arabic{paragraph}.\arabic*) \quad --}}
\setlist[enumerate,2]{label={(\arabic{paragraph}.\arabic{enumi}.\arabic*) \quad
\quad \quad \ --}}
\setlist[enumerate,3]{label={
(\arabic{paragraph}.\arabic{enumi}.\arabic{enumii}.\arabic*) \quad \quad \quad
\quad \quad \ --}}

\usepackage{multirow}
% footnote counter is interrupted by chapter (start over from 1 in new chapters)
% remove this feature, so the counter increases throughout the whole document.
\usepackage{chngcntr}
\counterwithout{footnote}{chapter}
\counterwithout{table}{chapter}
\counterwithout{figure}{chapter}

% space btw footnotes
% \setlength{\footnotesep}{0.5cm}

% \lstset{basicstyle=\fontsize{11}{13}\selectfont\ttfamily}
% \lstset{frame=none}
\lstset{showstringspaces=false,
        language=C++,
        columns=fixed,
        basicstyle=\linespread{1.0}\ttfamily\scriptsize,
        basewidth=0.5em}

\renewcommand{\theparagraph}{\arabic{paragraph}}
\renewcommand{\thefigure}{\arabic{figure}}
\renewcommand{\thetable}{\arabic{table}}

% syntax command
\newcommand{\tm}[1]{\texttt{#1}} % terminals
\newcommand{\nt}[1]{\textit{#1}} % non-terminals
\newcommand{\tb}[1]{\textbf{#1}} % bold

% syntax symbol
\newcommand{\synsym}[2][]{\parindent0pt\mbox{\qquad\textit{#2:} #1}\linebreak}
% syntax production
\newcommand{\synprd}[2][\linebreak]{\mbox{\qquad\qquad #2}#1}

% doc structures
\newcommand{\chptr}[2]{\chapter[#1]{#1\hfill[#2\label{#2}]}}

\newcommand{\sect}[2]{\section[#1]{#1\hfill[#2\label{#2}]}}
\newcommand{\ssect}[2]{\subsection[#1]{#1\hfill[#2\label{#2}]}}

\newcounter{ssssectcntr} % create new counter for \subsubsubsection
\newcommand{\sssect}[2]{
  \subsubsection[#1]{#1\hfill[#2\label{#2}]}
  \setcounter{ssssectcntr}{0} % start from 0
}

% use paragraph as the next level section
\newcommand{\ssssect}[2]{{ % two level nesting
  \titleformat{\paragraph}[hang]{\bfseries}
    {\hspace{-2.45em}\bfseries\color{structurecolor}\theparagraph\enspace}
    {1pt}{\color{structurecolor}\bfseries\filright}
  % label = subsubsection + ssssectcntr
  \renewcommand{\theparagraph}{\thesubsubsection.\thessssectcntr}
  \stepcounter{ssssectcntr} % step \ssssectcntr
  \paragraph{#1\hfill[#2\label{#2}]}  % the \subsubsubsection
  \setcounter{paragraph}{0} % restart paragraph
}}

% text style shortcuts
\newcommand{\bs}{\textbackslash}
\newcommand{\dq}{\textquotedbl}
\newcommand{\sq}{\textquotesingle}
\newcommand{\tg}{\textgreater}
\newcommand{\tl}{\textless}

\newcommand{\dsh}{\textendash}
\newcommand{\ttim}{\texttimes}
\newcommand{\tsub}{\textsubscript}
\newcommand{\tsup}{\textsuperscript}

\begin{document}
\maketitle
\tableofcontents

% \thispagestyle{empty}

\mainmatter
\hypersetup{pageanchor=true}

%chapters

\include{chapters/foreword}            % xi  ~ xi
\include{chapters/1.scope}             % 1   ~ 1
\include{chapters/2.refs}              % 2   ~ 2
\include{chapters/3.defs}              % 3   ~ 6
\include{chapters/4.intro}             % 7   ~ 21
\include{chapters/5.lex}               % 22  ~ 38
\include{chapters/6.basic}             % 39  ~ 85
\include{chapters/7.conv}              % 86  ~ 92
\include{chapters/8.expr}              % 93  ~ 143
\include{chapters/9.stmt}              % 144 ~ 154
\include{chapters/10.dcl.dcl}          % 155 ~ 200
\include{chapters/11.dcl.decl}         % 201 ~ 236
\include{chapters/12.class}            % 237 ~ 254
\include{chapters/13.class.derived}    % 255 ~ 266
\include{chapters/14.class.access}     % 267 ~ 277
\include{chapters/15.special}          % 278 ~ 308
\include{chapters/16.over}             % 309 ~ 341
\include{chapters/17.temp}             % 342 ~ 421
\include{chapters/18.except}           % 422 ~ 431
\include{chapters/19.cpp}              % 432 ~ 444
\include{chapters/20.library}          % 445 ~ 454
\include{chapters/21.language.support} % 476 ~ 510
\include{chapters/22.diagnostics}      % 511 ~ 527

% annexes
\setcounter{chapter}{0} % start from 0
\renewcommand{\thechapter}{\Alph{chapter}}
\renewcommand{\chaptername}{附录 \thechapter}

%\include{chapters/annex.a.gram}
%\include{chapters/annex.b.implimits}
%\include{chapters/annex.c.diff}
%\include{chapters/annex.d.depr}

\end{document}
